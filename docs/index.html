
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GrainMap &#8212; crispy 0.0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/jquery.js?v=5d32c60e"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="_static/documentation_options.js?v=d45e8c67"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'index';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="#">
  
  
  
  
  
  
    <p class="title logo__title">crispy 0.0.1 documentation</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none"></div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="toctree-wrapper compound">
</div>
<p># crispy
crispy - a CRystal population metric InSpector written in PYthon.</p>
<section id="grainmap">
<h1>GrainMap<a class="headerlink" href="#grainmap" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="crispy._grain_map.GrainMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy._grain_map.</span></span><span class="sig-name descname"><span class="pre">GrainMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grain_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grains'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lattice_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_grain_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._grain_map.GrainMap" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Factory class to represent a polycrystal.</p>
<p>This class is a factory for creating polycrystal objects. It can create
polycrystal objects from a list of ImageD11.grain.grain objects or from
a path to an HDF5 file containing the grain information. The class also
supports loading grain information from a lab-dct grain volume file.</p>
<p>Depending on the input, it will return either a crispy._tdxrd_map.TDXRDMap
or a crispy._dct_volume.LabDCTVolume. Common to the GrainMap is the
attribute <cite>grains</cite>, which is a list of ImageD11.grain.grain objects
representing the grains in the polycrystal. Moeover a polycrystal object
always hold a reference cell, which is a unitcell object describing the
lattice parameters and symmetry group of the material phase.</p>
<p>Any polycrystal object can be mounted on a crispy.dfxm.Goniometer object to</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grain_data</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageD11.grain.grain</span></code>) – Absolute path to the HDF5 file containing the grain information, or
alternatively a list of ImageD11.grain.grain objects. This may also
be a path to a lab-dct grain volume file.</p></li>
<li><p><strong>group_name</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – The name of the group in the HDF5 file containing
the grain information. Defaults to “grains”. Only used if
<cite>grain_data</cite> is a string to an HDF5 file with a 3DXRD grain map.</p></li>
<li><p><strong>lattice_parameters</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The lattice parameters of the
polycrystal [a, b, c, alpha, beta, gamma]. Defaults to None.</p></li>
<li><p><strong>symmetry</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The symmetry group of the phase. Defaults to None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A crispy._tdxrd_map.TDXRDMap or a crispy._dct_volume.LabDCTVolume.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="polycrystal">
<h1>Polycrystal<a class="headerlink" href="#polycrystal" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy._polycrystal.</span></span><span class="sig-name descname"><span class="pre">Polycrystal</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Meta class to represent a polycrystal.</p>
<p>This class is a meta class for creating polycrystal objects. Examples of
incarnations of this class are TDXRDMap and LabDCTVolume. To create a
polycrystal object, use the factory class crispy._grain_map.GrainMap which
will dispatch to the correct class depending on the input data.</p>
<p>Common to all polycrystal objects is the attribute <cite>grains</cite>, which is a
list of ImageD11.grain.grain objects representing the grains in the
polycrystal. Moeover a polycrystal object always hold a reference cell,
which is a unitcell object describing the lattice parameters and symmetry
group of the material phase.</p>
<p>Any polycrystal object can be mounted on a crispy.dfxm.Goniometer object to
compute available reciprocal space vectors and the corresponding
diffraction angles for DFXM experiments.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.reference_cell">
<span class="sig-name descname"><span class="pre">reference_cell</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.reference_cell" title="Link to this definition">#</a></dt>
<dd><p>The reference cell of the
polycrystal. This is a unitcell object describing the lattice
parameters and symmetry group of the material phase.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageD11.unitcell</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.grains">
<span class="sig-name descname"><span class="pre">grains</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.grains" title="Link to this definition">#</a></dt>
<dd><p>A list of
ImageD11.grain.grain objects representing the grains in the
polycrystal.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageD11.grain.grain</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.number_of_grains">
<span class="sig-name descname"><span class="pre">number_of_grains</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.number_of_grains" title="Link to this definition">#</a></dt>
<dd><p>The number of grains in the
polycrystal.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal._misorientations">
<span class="sig-name descname"><span class="pre">_misorientations</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal._misorientations" title="Link to this definition">#</a></dt>
<dd><p>The misorientations between
all grain neighbours. This is a 2D array of shape (N, …) where N
is the number of grains in the polycrystal. i.e the misorientations
between grain i and all of its neighbours are stored in
misorientations[i]. The shape of the second dimension depends
on the number of neighbours of grain i.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.neighbours">
<span class="sig-name descname"><span class="pre">neighbours</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.neighbours" title="Link to this definition">#</a></dt>
<dd><p>The neighbours of each grain in the
polycrystal. This is a 2D array of shape (N, M) where N is the
number of grains in the polycrystal and M is the number of
neighbours of each grain. i.e the neighbours of grain i are stored
in neighbours[i]. with M being the number of neighbours of grain i,
– a variable number of neighbours is allowed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.texturize">
<span class="sig-name descname"><span class="pre">texturize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.texturize" title="Link to this definition">#</a></dt>
<dd><p>Compute the misorientations between all grain neighbours.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.misorientations">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">misorientations</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.misorientations" title="Link to this definition">#</a></dt>
<dd><p>Return the misorientations between all grain neighbours.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.ubi">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ubi</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.ubi" title="Link to this definition">#</a></dt>
<dd><p>Return all the UBI matrices of the grains in the polycrystal. shape=(N, 3, 3)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.u">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">u</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.u" title="Link to this definition">#</a></dt>
<dd><p>Return all the U matrices of the grains in the polycrystal. shape=(N, 3, 3)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.orientation">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">orientation</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.orientation" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.b">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">b</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.b" title="Link to this definition">#</a></dt>
<dd><p>Return all the B matrices of the grains in the polycrystal. shape=(N, 3, 3)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.strain">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">strain</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.strain" title="Link to this definition">#</a></dt>
<dd><p>Return all the sample strain tensors of the grains in the polycrystal. shape=(N, 3, 3)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.crystal_system">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">crystal_system</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.crystal_system" title="Link to this definition">#</a></dt>
<dd><p>Return the crystal system of the polycrystal as as a string</p>
<dl class="simple">
<dt>i.e<span class="classifier">triclinic, monoclinic, orthorhombic, tetragonal,</span></dt><dd><p>trigonal, hexagonal or cubic</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._polycrystal.Polycrystal.colorize">
<span class="sig-name descname"><span class="pre">colorize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipf_axes</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_polycrystal.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._polycrystal.Polycrystal.colorize" title="Link to this definition">#</a></dt>
<dd><p>Compute the IPF colors for the polycrystal using orix (<a class="github reference external" href="https://github.com/pyxem/orix">pyxem/orix</a>)</p>
<p>The implementation is based on the ImageD11 interpretation of orix.</p>
<dl class="simple">
<dt>sets a <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>: of RGB values for each grain in the polycrystal. Shape=(3, k).</dt><dd><p>self.grain.rgb[:, k] is the RGB value of grain when viewed along the k-th axis.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>axes</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The viewing axes to compute the IPF colors for, default is the
x, y, and z axes, i.e np.array([[1, 0, 0], [0, 1, 0], [0, 0, 1]]). axes[i] is the i-th
viewing axis.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="tdxrdmap">
<h1>TDXRDMap<a class="headerlink" href="#tdxrdmap" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy._tdxrd_map.</span></span><span class="sig-name descname"><span class="pre">TDXRDMap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grainfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'grains'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lattice_parameters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">symmetry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#crispy._polycrystal.Polycrystal" title="crispy._polycrystal.Polycrystal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polycrystal</span></code></a></p>
<p>Class to represent a polycrystal as a list of grain centroids and orientations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>grainfile</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageD11.grain.grain</span></code>) – Absolute path to the HDF5 file containing the grain information, or
alternatively a list of ImageD11.grain.grain objects.</p></li>
<li><p><strong>group_name</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – The name of the group in the HDF5 file containing
the grain information. Defaults to “grains”.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.grains">
<span class="sig-name descname"><span class="pre">grains</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.grains" title="Link to this definition">#</a></dt>
<dd><p>List of grains in the polycrystal.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageD11.grain.grain</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.number_of_grains">
<span class="sig-name descname"><span class="pre">number_of_grains</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.number_of_grains" title="Link to this definition">#</a></dt>
<dd><p>Number of grains in the polycrystal.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.bounding_box">
<span class="sig-name descname"><span class="pre">bounding_box</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.bounding_box" title="Link to this definition">#</a></dt>
<dd><p>The bounding box of the polycrystal. Shape=(3,2).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.extent">
<span class="sig-name descname"><span class="pre">extent</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.extent" title="Link to this definition">#</a></dt>
<dd><p>The extent of the polycrystal. Shape=(3,).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.centroids">
<span class="sig-name descname"><span class="pre">centroids</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.centroids" title="Link to this definition">#</a></dt>
<dd><p>All the grain centroid postions in the polycrystal. Shape=(N, 3).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.u">
<span class="sig-name descname"><span class="pre">u</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.u" title="Link to this definition">#</a></dt>
<dd><p>All the U matrices of the grains in the polycrystal. Shape=(N, 3, 3).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.orientations">
<span class="sig-name descname"><span class="pre">orientations</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.orientations" title="Link to this definition">#</a></dt>
<dd><p>Alias for u.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.b">
<span class="sig-name descname"><span class="pre">b</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.b" title="Link to this definition">#</a></dt>
<dd><p>All the B matrices of the grains in the polycrystal. Shape=(N, 3, 3).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.neighbours">
<span class="sig-name descname"><span class="pre">neighbours</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.neighbours" title="Link to this definition">#</a></dt>
<dd><p>The neighbours of each grain in the polycrystal. shape=(N,).
each sub-array contains the indices of the neighbours of the corresponding grain.
is None before calling the tesselate() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.misorientations">
<span class="sig-name descname"><span class="pre">misorientations</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.misorientations" title="Link to this definition">#</a></dt>
<dd><p>The misorientations between all grain neighbours. shape=(N,).
each sub-array contains the misorientations between the corresponding grain and its neighbours.
is None before calling the texturize() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.add_grain_attr">
<span class="sig-name descname"><span class="pre">add_grain_attr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">grains</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.add_grain_attr" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id0">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">neighbours</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id0" title="Link to this definition">#</a></dt>
<dd><p>Return the neighbours of each grain in the polycrystal.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id1">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">bounding_box</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id1" title="Link to this definition">#</a></dt>
<dd><p>Return the bounding box of the polycrystal, shape=(3,2)</p>
<p>Format is: [ [min_x, max_x], [min_y, max_y], [min_z, max_z] ].</p>
<p>computation is done by taking the min and max of the centroids.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id2">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">extent</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id2" title="Link to this definition">#</a></dt>
<dd><p>Return the extent of the polycrystal.</p>
<p>Format is: [ xwidth, ywidth, zwidth ].</p>
<p>computation is done by taking the min and max of the centroids.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="id3">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">centroids</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id3" title="Link to this definition">#</a></dt>
<dd><p>Return all the grain centroid postions in the polycrystal. shape=(N, 3)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.sum_peak_intensity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sum_peak_intensity</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.sum_peak_intensity" title="Link to this definition">#</a></dt>
<dd><p>Return sum intensity of all indexed peaks for each grain. shape=(N,)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.number_of_peaks">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">number_of_peaks</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.number_of_peaks" title="Link to this definition">#</a></dt>
<dd><p>Return number of indexed peaks for each grain. shape=(N,)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.median_peak_intensity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">median_peak_intensity</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.median_peak_intensity" title="Link to this definition">#</a></dt>
<dd><p>Return the median peak intensity for all grains. shape=(N,)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.mean_peak_intensity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">mean_peak_intensity</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.mean_peak_intensity" title="Link to this definition">#</a></dt>
<dd><p>Return the mean peak intensity for all grains. shape=(N,)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.min_peak_intensity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">min_peak_intensity</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.min_peak_intensity" title="Link to this definition">#</a></dt>
<dd><p>Return the minimum peak intensity for all grains. shape=(N,)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.max_peak_intensity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">max_peak_intensity</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.max_peak_intensity" title="Link to this definition">#</a></dt>
<dd><p>Return the maximum peak intensity for all grains. shape=(N,)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.std_peak_intensity">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">std_peak_intensity</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.std_peak_intensity" title="Link to this definition">#</a></dt>
<dd><p>Return the standard deviation of peak intensities for all grains. shape=(N,)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.from_array">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_array</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">translations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ubi_matrices</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.from_array" title="Link to this definition">#</a></dt>
<dd><p>Instantiate the polycrystal from pure translations and ubi matrices.</p>
<p>This circumvents the need to read a grain file and ImageD11.grain.grain objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>translations</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">iterable</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – 3D grain center translations each of shape=(3,).</p></li>
<li><p><strong>ubi_matrices</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">iterable</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – ubi matrices each of shape=(3, 3).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The polycrystal object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">crispy._tdxrd_map.TDXRDMAP</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.tesselate">
<span class="sig-name descname"><span class="pre">tesselate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.tesselate" title="Link to this definition">#</a></dt>
<dd><p>Perform a voronoi tesselation using crispy.tesselate.voronoi</p>
<p>Generates the polycrystal mesh with one convex polyhedra per grain.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.texturize">
<span class="sig-name descname"><span class="pre">texturize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.texturize" title="Link to this definition">#</a></dt>
<dd><p>Compute the misorientation between all grain neighbours.</p>
<p>NOTE: uses xfab.symmetry.Umis.</p>
<p>This function sets the misorientations attribute of the polycrystal object,
such that self.misorientations[i] is a shape=(n,) array of misorientations
between grain number i and its n neighbours. Each grain can have a different
number of neighbours. The misorientation between grain i and its j-th neighbour
is always the minimum misorientation between all possible orientations taking
into account the crystal system symmetry.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._tdxrd_map.TDXRDMap.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grains</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighbourhood</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_tdxrd_map.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._tdxrd_map.TDXRDMap.write" title="Link to this definition">#</a></dt>
<dd><p>Write the polycrystal to a file readable by Paraview.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – Absolute path to the file to write the polycrystal
to, must end in .vtk.</p></li>
<li><p><strong>grains</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code> or <code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>) – The
grain ids to write. Defaults to “all” in which case all grains
in the polycrystal are written.</p></li>
<li><p><strong>neighbourhood</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – When not None, the grains argument is overwritten
such that the grain number -neighbourhood- and all of its neighbours are
written to file. Default is None.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="labdctvolume">
<h1>LabDCTVolume<a class="headerlink" href="#labdctvolume" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy._lab_dct_volume.</span></span><span class="sig-name descname"><span class="pre">LabDCTVolume</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#crispy._polycrystal.Polycrystal" title="crispy._polycrystal.Polycrystal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Polycrystal</span></code></a></p>
<p>Class to represent a voxelated lab-dct grain volume.</p>
<p>This class is used to represent a voxelated grain volume in the lab
frame. The class is used to read the grain volume data from a h5
file in the lab-dct format and to provide methods to manipulate the
grain volume data. This class is a specific implementation of the
Polycrystal class and can be interfaced with the crispy.dfxm.Goniometer
to search for dfxm reflections. This may be usefull in
preperation for synchrotron measurements to determine what type of
reflections and orientation that will be available in the sample.</p>
<p>Note that the lab-dct (as implemented by xnovo) coordinate system aligns
with the ESR ID11 and ID03 coordinate systems in that the z axis is
pointing towards the ceiling, the x axis is pointing along the beam
photon propagation direction and the y axis is pointing to the left
as seen by a traveling photon. Loading a lab dct map with LabDCTVolume
will unify the coordinate system to be the same as that of crispy.TDXRDMap.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – The path to the h5 file containing the grain
volume data. The file should be in the lab-dct format.
The file should contain the following datasets:
- LabDCT/Spacing: The voxel size in microns.
- LabDCT/Data/GrainId: The grain id for each voxel.
- LabDCT/Data/Rodrigues: The Rodrigues vector for each voxel.
- PhaseInfo/Phase01/UnitCell: The unit cell parameters.
- PhaseInfo/Phase01/SpaceGroup: The space group of the phase.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.reference_cell">
<span class="sig-name descname"><span class="pre">reference_cell</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.reference_cell" title="Link to this definition">#</a></dt>
<dd><p>The reference cell of the
grain volume.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>ImageD11.unitcell</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.voxel_size">
<span class="sig-name descname"><span class="pre">voxel_size</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.voxel_size" title="Link to this definition">#</a></dt>
<dd><p>The voxel size in microns.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.labels">
<span class="sig-name descname"><span class="pre">labels</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.labels" title="Link to this definition">#</a></dt>
<dd><p>The grain id for each voxel shape=(m,n,o)
axis=0 is z, axis=1 is y, axis=2 is x. coordinates always
increase from low to high along the positive axis direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.X">
<span class="sig-name descname"><span class="pre">X</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.X" title="Link to this definition">#</a></dt>
<dd><p>The x coordinates of the voxels in microns. shape=(m,n,o)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.Y">
<span class="sig-name descname"><span class="pre">Y</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.Y" title="Link to this definition">#</a></dt>
<dd><p>The y coordinates of the voxels in microns. shape=(m,n,o)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.Z">
<span class="sig-name descname"><span class="pre">Z</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.Z" title="Link to this definition">#</a></dt>
<dd><p>The z coordinates of the voxels in microns. shape=(m,n,o)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.orientations">
<span class="sig-name descname"><span class="pre">orientations</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.orientations" title="Link to this definition">#</a></dt>
<dd><p>The orientations of the grains in
matrix vector format. shape=(number_of_grains, 3, 3)</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.B0">
<span class="sig-name descname"><span class="pre">B0</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.B0" title="Link to this definition">#</a></dt>
<dd><p>The B0 matrix for the grain volume. I.e the
recirprocal lattice vectors in the lab frame (upper triangular
3,3 matrix).</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.grains">
<span class="sig-name descname"><span class="pre">grains</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.grains" title="Link to this definition">#</a></dt>
<dd><p>The grains in the grain volume. len=number_of_grains</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.number_of_grains">
<span class="sig-name descname"><span class="pre">number_of_grains</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.number_of_grains" title="Link to this definition">#</a></dt>
<dd><p>The number of grains in the grain volume.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_path</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.write" title="Link to this definition">#</a></dt>
<dd><p>Write the grain volume to paraview readable formats.</p>
<p>The grain volume will be written to the specified file path,
example of formats are .vtk and .xdmf.</p>
<dl class="simple">
<dt>The resulting point data will contain the following attributes:</dt><dd><ul class="simple">
<li><p>spacing_in_um: The voxel size in microns.</p></li>
<li><p>ipf_x: The x component of the IPF color.</p></li>
<li><p>ipf_y: The y component of the IPF color.</p></li>
<li><p>ipf_z: The z component of the IPF color.</p></li>
<li><p>labels: The grain id for each voxel.</p></li>
<li><p>grain_sizes: The size of each grain in units of voxels.</p></li>
</ul>
</dd>
</dl>
<p>The data format is sparse in the sense that only non-void voxels
will be written to the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_path</strong> (<em>str</em>) – The path to the file to write the grain
volume to. The file should be in the paraview readable
format. The file should end with .vtk or .xdmf or similar.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.texturize">
<span class="sig-name descname"><span class="pre">texturize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.texturize" title="Link to this definition">#</a></dt>
<dd><p>Compute the misorientation between all grain neighbours.</p>
<p>NOTE: uses xfab.symmetry.Umis.</p>
<p>This function sets the misorientations attribute of the polycrystal object,
such that self.misorientations[i] is a shape=(n,) array of misorientations
between grain number i and its n neighbours. Each grain can have a different
number of neighbours. The misorientation between grain i and its j-th neighbour
is always the minimum misorientation between all possible orientations taking
into account the crystal system symmetry.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.center_of_mass">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">center_of_mass</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.center_of_mass" title="Link to this definition">#</a></dt>
<dd><p>The center of mass of the voxel volume in units of microns.</p>
<p>The center of mass is defined as the arithmetic mean of the
coordinates of the non-void voxels.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray of shape = (3,)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.center_volume">
<span class="sig-name descname"><span class="pre">center_volume</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.center_volume" title="Link to this definition">#</a></dt>
<dd><p>Center the volume around the center of mass.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.filter">
<span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">min_grain_size_in_voxels</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.filter" title="Link to this definition">#</a></dt>
<dd><p>Filter the grains based on their size.</p>
<p>Grains with a size smaller than grain_size will be removed from
the voxel volume. Attributes will be updated accordingly.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>min_grain_size_in_voxels</strong> (<em>int</em>) – The minimum size of the grains to keep in
units of voxels.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.crop">
<span class="sig-name descname"><span class="pre">crop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ymin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ymax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">zmax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.crop" title="Link to this definition">#</a></dt>
<dd><p>Crop the voxel volume to the specified bounds.</p>
<p>The voxel volume will be cropped to the specified bounds. The
attributes will be updated accordingly pruning any grains that
are outside the bounds.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xmin</strong> (<em>float</em>) – The minimum x coordinate of the crop.</p></li>
<li><p><strong>xmax</strong> (<em>float</em>) – The maximum x coordinate of the crop.</p></li>
<li><p><strong>ymin</strong> (<em>float</em>) – The minimum y coordinate of the crop.</p></li>
<li><p><strong>ymax</strong> (<em>float</em>) – The maximum y coordinate of the crop.</p></li>
<li><p><strong>zmin</strong> (<em>float</em>) – The minimum z coordinate of the crop.</p></li>
<li><p><strong>zmax</strong> (<em>float</em>) – The maximum z coordinate of the crop.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.translate">
<span class="sig-name descname"><span class="pre">translate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">translation</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.translate" title="Link to this definition">#</a></dt>
<dd><p>Translate the voxel volume by the specified translation.</p>
<p>The voxel volume will be translated by the specified translation.
The attributes will be updated accordingly.</p>
<p>This is usefull for realigning the voxel volume to be used in
diffraction simulations or in integration with a synchrotron
measurement setting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>translation</strong> (<em>np.ndarray</em>) – The translation vector in units of microns.
The translation vector should be of shape (3,).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy._lab_dct_volume.LabDCTVolume.rotate">
<span class="sig-name descname"><span class="pre">rotate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rotation</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/_lab_dct_volume.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy._lab_dct_volume.LabDCTVolume.rotate" title="Link to this definition">#</a></dt>
<dd><p>Rotate the voxel volume by the specified rotation.</p>
<p>The voxel volume will be rotated by the specified rotation.
The attributes will be updated accordingly. Note that the
frame of reference is the lab frame which is initally
aligned with the voxel volume grid. After subsequent
rotations, the frame of reference may not be aligned with
the voxel volume grid.</p>
<p>This will update both voxel coordinates and grain orientations.</p>
<p>This is usefull for realigning the voxel volume to be used in
diffraction simulations or in integration with a synchrotron
measurement setting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rotation</strong> (<em>np.ndarray</em><em> or </em><em>scipy.spatial.transform.Rotation</em>) – The rotation
matrix, rotation vector or rotation object to rotate the voxel volume by.
if this is a rotation vector, it should be of shape (3,) with the norm
equal to the angle of rotation in radians. The direction of the vector
is the axis of rotation.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-crispy.dfxm">
<span id="dfxm"></span><h1>dfxm<a class="headerlink" href="#module-crispy.dfxm" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy.dfxm.</span></span><span class="sig-name descname"><span class="pre">Goniometer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polycrystal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_distance</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_bounds</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to represent a Diffraction X-ray Microscopy (DFXM) experiment setup.</p>
<p>This class is designed to find the angular settings required of the microscope in order
to make a given set of Miller indices come into diffraction at some rotation of the turntable.</p>
<p>This is usefull for situations when we want to reach several reflection in DFXM
without re-mounitng the sample</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.polycrystal">
<span class="sig-name descname"><span class="pre">polycrystal</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.polycrystal" title="Link to this definition">#</a></dt>
<dd><p>The polycrystal object
mounted on the goniometer.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#crispy._polycrystal.Polycrystal" title="crispy._polycrystal.Polycrystal"><code class="xref py py-obj docutils literal notranslate"><span class="pre">crispy._polycrystal.Polycrystal</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.energy">
<span class="sig-name descname"><span class="pre">energy</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.energy" title="Link to this definition">#</a></dt>
<dd><p>Photon energy in keV.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.detector_distance">
<span class="sig-name descname"><span class="pre">detector_distance</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.detector_distance" title="Link to this definition">#</a></dt>
<dd><p>The detector distance in meters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.motor_bounds">
<span class="sig-name descname"><span class="pre">motor_bounds</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.motor_bounds" title="Link to this definition">#</a></dt>
<dd><dl class="simple">
<dt>Dictionary containing the motor bounds of the</dt><dd><p>goniometer/hexapod in units of degrees (sample stage) and meters
(for detector translations). Keys are given in the example dictionary below:</p>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s2">&quot;mu&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="c1"># degrees</span>
<span class="s2">&quot;omega&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">22</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span> <span class="c1"># degrees</span>
<span class="s2">&quot;chi&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="c1"># degrees</span>
<span class="s2">&quot;phi&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="c1"># degrees</span>
<span class="s2">&quot;detector_z&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.04</span><span class="p">,</span> <span class="mf">1.96</span><span class="p">),</span> <span class="c1"># meters</span>
<span class="s2">&quot;detector_y&quot;</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.169</span><span class="p">,</span> <span class="mf">1.16</span><span class="p">)</span> <span class="c1"># meters</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.find_reflections">
<span class="sig-name descname"><span class="pre">find_reflections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alignment_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_unreachable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.find_reflections" title="Link to this definition">#</a></dt>
<dd><p>Find all reflecitions in the polycrystal reachable by the goniometer in DFXM</p>
<p>Running this function will find all reflections in the polycrystal that are reachable
by the goniometer in DFXM. The reflections are found by running an optimization
algorithm that aligns the lattice normals with the target vectors. The target vectors
are defined as the z-axis rotated by the Bragg angle in the xz-plane into the reverse
direction of the beam which is assumed to propagate in the positive x-direction.
The reflections are stored in the polycrystal object as a dictionary with the keys
“hkl”, “mu”, “omega”, “chi”, “phi”, “residual”, and “theta”. The values are the
corresponding values for each reflection. The reflections are stored in the order
they are found in the optimization. To access the reflections of a grain number i use:</p>
<blockquote>
<div><p>polycrystal.grains[i].dfxm[“hkl”] # hkl vectors that can diffract
polycrystal.grains[i].dfxm[“mu”] # mu angles at which diffraction occurs
polycrystal.grains[i].dfxm[“omega”] # omega angles at which diffraction occurs
polycrystal.grains[i].dfxm[“chi”] # chi angles at which diffraction occurs
polycrystal.grains[i].dfxm[“phi”] # phi angles at which diffraction occurs
polycrystal.grains[i].dfxm[“residual”] # residuals, radians between the target vector Q-vector and the algined lattice normal.
polycrystal.grains[i].dfxm[“theta”] # Bragg angles at which diffraction occurs</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alignment_tol</strong> (<em>float</em>) – The tolerance for determining if the optimization
managed to align the reflection for diffraction in unit of degrees,
representing the misalignment of the lattice normal from the target vector.
Default is 1e-4.</p></li>
<li><p><strong>maxiter</strong> (<em>int</em>) – The maximum number of iterations for the optimization performed
by L-BFGS-B. Default is None, which will be set to 200 * N, where N is the
number of reflections.</p></li>
<li><p><strong>maxls</strong> (<em>int</em>) – The maximum number of line search iterations for the optimization per
iteration of L-BFGS-B. Default is 25.</p></li>
<li><p><strong>ftol</strong> (<em>float</em>) – The tolerance for the optimization cost function before termination.
Default is None, which will be set to 1e-8 / N, where N is the number of
reflections.</p></li>
<li><p><strong>mask_unreachable</strong> (<em>bool</em>) – If True, mask reflections that are unreachable
by the goniometer/hexapod. A reflection is unreachable if the misalignment
of the lattice normal from the target vector is greater than the maximum sum
of the absolute values of the motor bounds. Default is False.
Maskin unreachable reflections speed up the optimization by simply not
considering them. When masking is enabled, the solution and residuals
success arrays will hold np.nan values for the unreachable reflections.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.table_of_reflections">
<span class="sig-name descname"><span class="pre">table_of_reflections</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.table_of_reflections" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Goniometer.find_symmetry_axis">
<span class="sig-name descname"><span class="pre">find_symmetry_axis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alignment_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_unreachable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Goniometer.find_symmetry_axis" title="Link to this definition">#</a></dt>
<dd><p>Find all Miller indices that can be aligned with the z-axis within motor bounds.</p>
<p>Running this function will find all reflections in the polycrystal that are reachable
by the goniometer in DFXM. The reflections are found by running an optimization
algorithm that aligns the lattice normals with the target vectors. The target vectors
are statically defined as the z-axis. The reflections are stored in the polycrystal
grains objects as dictionaries with the keys “hkl”, “mu”, “omega”, “chi”, “phi”,
and “residual”. To access the reflections of a grain number i use:</p>
<blockquote>
<div><p>polycrystal.grains[i].dfxm[“hkl”] # hkl vectors that can diffract
polycrystal.grains[i].dfxm[“mu”] # mu angles at which diffraction occurs
polycrystal.grains[i].dfxm[“omega”] # omega angles at which diffraction occurs
polycrystal.grains[i].dfxm[“chi”] # chi angles at which diffraction occurs
polycrystal.grains[i].dfxm[“phi”] # phi angles at which diffraction occurs
polycrystal.grains[i].dfxm[“residual”] # residuals, radians between the target vector Q-vector and the algined lattice normal.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>alignment_tol</strong> (<em>float</em>) – The tolerance for determining if the optimization
managed to align the reflection for diffraction in unit of degrees,
representing the misalignment of the lattice normal from the target vector.
Default is 1e-4.</p></li>
<li><p><strong>maxiter</strong> (<em>int</em>) – The maximum number of iterations for the optimization performed
by L-BFGS-B. Default is None, which will be set to 200 * N, where N is the
number of reflections.</p></li>
<li><p><strong>maxls</strong> (<em>int</em>) – The maximum number of line search iterations for the optimization per
iteration of L-BFGS-B. Default is 25.</p></li>
<li><p><strong>ftol</strong> (<em>float</em>) – The tolerance for the optimization cost function before termination.
Default is None, which will be set to 1e-8 / N, where N is the number of
reflections.</p></li>
<li><p><strong>mask_unreachable</strong> (<em>bool</em>) – If True, mask reflections that are unreachable
by the goniometer/hexapod. A reflection is unreachable if the misalignment
of the lattice normal from the target vector is greater than the maximum sum
of the absolute values of the motor bounds. Default is False.
Maskin unreachable reflections speed up the optimization by simply not
considering them. When masking is enabled, the solution and residuals
success arrays will hold np.nan values for the unreachable reflections.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy.dfxm.</span></span><span class="sig-name descname"><span class="pre">Braggez</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Braggez is a class that performs optimization of the gonio angles to align the crystal
with the target reflection. The optimization is performed using the L-BFGS-B algorithm</p>
<p>This class is currently implemneted for the case of Dark Field X-ray Microscopy (DFXM) where
the gonimeter/hexapod has 4 degrees of freedom (mu, omega, chi, phi). Stacked as:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>base : mu</p></li>
<li><p>bottom : omega</p></li>
<li><p>top 1    : chi</p></li>
<li><p>top 2    : phi</p></li>
</ol>
</div></blockquote>
<p>Here mu is a rotation about the negative y-axis, omega is a positive rotation about the
z-axis, chi is a positive rotation about the x-axis, and phi is a positive rotation about
the y-axis.</p>
<p>The target reflection is always defined as lying in the xz-plane, with eta=0 (ez).
This is also known as the simplified dfxm geometry.</p>
<dl class="simple">
<dt>The mathmatical problem is defined as follows:</dt><dd><p>Let nhat be a vector on the unit sphere representing the target reflection in its
current position (i.e ub &#64; hkl). Next let target be a vector on the unit sphere
such that target forms an angel of theta with the z-axis, where theta is the Bragg
angle. The goal is to find a set of angles mu, omega, chi, phi of the goniometer/
hexapod such that the reflection nhat is aligned with the target vector. Moreover,
this must be done while considering the motor bounds of the goniometer/hexapod.</p>
</dd>
</dl>
<p>NOTE: The solution is not unique. Braggez will find you one solution that satisfies these
conditions if existent using a gradient based optimization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em>) – Energy of the X-ray beam in keV</p></li>
<li><p><strong>motor_bounds</strong> (<em>dict</em>) – Dictionary containing the motor bounds of the goniometer/hexapod
e.g. {“mu”: (0, 20), “omega”: (-22, 22), “chi”: (-5, 5), “phi”: (-5, 5)}</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – Small number used to compute the numerical derivatives during optimization</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – If True, print the results and iteration of the optimization</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.energy">
<span class="sig-name descname"><span class="pre">energy</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.energy" title="Link to this definition">#</a></dt>
<dd><p>Energy of the X-ray beam in keV</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.motor_bounds">
<span class="sig-name descname"><span class="pre">motor_bounds</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.motor_bounds" title="Link to this definition">#</a></dt>
<dd><p>Dictionary containing the motor bounds of the goniometer/hexapod
e.g. {“mu”: (0, 20), “omega”: (-22, 22), “chi”: (-5, 5), “phi”: (-5, 5)}</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.epsilon">
<span class="sig-name descname"><span class="pre">epsilon</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.epsilon" title="Link to this definition">#</a></dt>
<dd><p>Small number used to compute the numerical derivatives during optimization</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.verbose">
<span class="sig-name descname"><span class="pre">verbose</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.verbose" title="Link to this definition">#</a></dt>
<dd><p>If True, print the results and iteration of the optimization</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.R_mu">
<span class="sig-name descname"><span class="pre">R_mu</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mu</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.R_mu" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.R_omega">
<span class="sig-name descname"><span class="pre">R_omega</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">omega</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.R_omega" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.R_chi">
<span class="sig-name descname"><span class="pre">R_chi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">chi</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.R_chi" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.R_phi">
<span class="sig-name descname"><span class="pre">R_phi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">phi</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.R_phi" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.R">
<span class="sig-name descname"><span class="pre">R</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.R" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.cost_vector">
<span class="sig-name descname"><span class="pre">cost_vector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rotation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nhat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.cost_vector" title="Link to this definition">#</a></dt>
<dd><p>Array of misfits in radians for each reflection</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong> (<em>rotation</em>) – obj: scipy.spatial.transform.Rotation): The rotations, length N</p></li>
<li><p><strong>nhat</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The lattice plane normals, shape (3, N)</p></li>
<li><p><strong>target</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The target vectors, shape (3, N)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>The cost vector in radians, shape (N,)</dt><dd><p>each instance represents the misalignment of the lattice normal
from the target vector.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.cost">
<span class="sig-name descname"><span class="pre">cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rotation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nhat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.cost" title="Link to this definition">#</a></dt>
<dd><p>Aggregated cost function to fit many reflections simultaneously</p>
<p>This is simply the sum of the cost_vector</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong> (<em>rotation</em>) – obj: scipy.spatial.transform.Rotation): The rotations, length N</p></li>
<li><p><strong>nhat</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The lattice plane normals, shape (3, N)</p></li>
<li><p><strong>target</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The target vectors, shape (3, N)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The aggregated cost.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.cost_and_grad">
<span class="sig-name descname"><span class="pre">cost_and_grad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nhat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.cost_and_grad" title="Link to this definition">#</a></dt>
<dd><p>Computes the cost and the gradient of the cost function</p>
<p>Uses a simple finite difference method to compute the gradient</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>x</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – optimization variables flattened, shape (4*N,)</p></li>
<li><p><strong>nhat</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The lattice plane normals, shape (3, N)</p></li>
<li><p><strong>target</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The target vectors, shape (3, N)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The aggregated cost.
(<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The gradient of the cost function, shape (4*N,)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.get_unit_vectors">
<span class="sig-name descname"><span class="pre">get_unit_vectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hkls</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.get_unit_vectors" title="Link to this definition">#</a></dt>
<dd><p>Get the lattice plane normals, nhat, and the target vectors</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ub</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The UB matrix, shape (3, 3)</p></li>
<li><p><strong>hkls</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The hkl vectors, shape (3, N)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The lattice plane normals, shape (3, N)
target (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The target vectors, shape (3, N)
theta (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The Bragg angle in radians, shape (N,)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>nhat (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.Braggez.align">
<span class="sig-name descname"><span class="pre">align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hkls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alignment_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_unreachable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.Braggez.align" title="Link to this definition">#</a></dt>
<dd><p>Align Q = ub &#64; hkls vectors with eta=0 plane to satisfy Bragg’s law.</p>
<p>Runs an optimization to find the goniometer angles that align the lattice plane
normals to the target vectors. The target vectors are defined as the z-axis
rotated by the Bragg angle in the xz-plane into the reverse direction of the
beam which is assumed to propagate in the positive x-direction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ub</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The UB matrix, shape (3, 3)</p></li>
<li><p><strong>hkls</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The hkl vectors, shape (3, N)</p></li>
<li><p><strong>alignment_tol</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – The tolerance for determining if the optimization
managed to align the reflection for diffraction in unit of degrees,
representing the misalignment of the lattice normal from the target vector.
Default is 1e-4.</p></li>
<li><p><strong>maxiter</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of iterations for the optimization performed
by L-BFGS-B. Default is None, which will be set to 200 * N, where N is the
number of reflections.</p></li>
<li><p><strong>maxls</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of line search iterations for the optimization per
iteration of L-BFGS-B. Default is 25.</p></li>
<li><p><strong>ftol</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – The tolerance for the optimization cost function before termination.
Default is None, which will be set to 1e-8 / N, where N is the number of
reflections.</p></li>
<li><p><strong>mask_unreachable</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>) – If True, mask reflections that are unreachable
by the goniometer/hexapod. A reflection is unreachable if the misalignment
of the lattice normal from the target vector is greater than the maximum sum
of the absolute values of the motor bounds. Default is False. Masking
unreachable reflections speed up the optimization by simply not
considering them. When masking is enabled, the solution and residuals
success arrays will hold np.nan values for the unreachable reflections.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>tuple containing:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><strong>sol</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The solution angles in degrees,</dt><dd><p>shape (4, N) solution angles are in the order
[mu, omega, chi, phi] such that solution[:, i] are the
goniometer angles for the ith reflection.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>residuals</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The residuals in degrees,</dt><dd><p>shape (N,) these are the misalignments of the lattice
normal from the target vector given that the solution
angles are applied.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>success</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The success of the optimization,</dt><dd><p>shape (N,) True if the optimization converged within a
tolerance of alignment_tol</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>theta</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The Bragg angles,</dt><dd><p>in degrees for each reflection, shape (N,)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">crispy.dfxm.</span></span><span class="sig-name descname"><span class="pre">BraggSym</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">motor_bounds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epsilon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#crispy.dfxm.Braggez" title="crispy.dfxm.Braggez"><code class="xref py py-class docutils literal notranslate"><span class="pre">Braggez</span></code></a></p>
<p>BraggSym is a class that performs optimization of the gonio angles to align
crystal lattice normals with the lab-z axis.</p>
<p>This is usefull for oblique diffraction geometry in which several symmetry equivalent
reflections are to be imaged by rotating the sample around a symmetry axis.</p>
<p>This class is currently implemneted for the case of Dark Field X-ray Microscopy (DFXM) where
the gonimeter/hexapod has 4 degrees of freedom (mu, omega, chi, phi). Stacked as:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>base : mu</p></li>
<li><p>bottom : omega</p></li>
<li><p>top 1    : chi</p></li>
<li><p>top 2    : phi</p></li>
</ol>
</div></blockquote>
<p>Here mu is a rotation about the negative y-axis, omega is a positive rotation about the
z-axis, chi is a positive rotation about the x-axis, and phi is a positive rotation about
the y-axis.</p>
<p>The target reflection is always defined as the z-axis.</p>
<dl class="simple">
<dt>The mathmatical problem is defined as follows:</dt><dd><p>Let nhat be a vector on the unit sphere representing the target reflection in its
current position (i.e ub &#64; hkl). Next let target be the z-axis. The goal is to
find a set of angles mu, omega, chi, phi of the goniometer/hexapod such that the
reflection nhat is aligned with the target vector. Moreover, this must be done
while considering the motor bounds of the goniometer/hexapod.</p>
</dd>
<dt>NOTE: The solution is not unique. BraggSym will find you one solution that</dt><dd><p>satisfies these conditions if existent using a gradient based optimization.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy</strong> (<em>float</em>) – Energy of the X-ray beam in keV</p></li>
<li><p><strong>motor_bounds</strong> (<em>dict</em>) – Dictionary containing the motor bounds of the goniometer/hexapod
e.g. {“mu”: (0, 20), “omega”: (-22, 22), “chi”: (-5, 5), “phi”: (-5, 5)}</p></li>
<li><p><strong>epsilon</strong> (<em>float</em>) – Small number used to compute the numerical derivatives during optimization</p></li>
<li><p><strong>verbose</strong> (<em>bool</em>) – If True, print the results and iteration of the optimization</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym.energy">
<span class="sig-name descname"><span class="pre">energy</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym.energy" title="Link to this definition">#</a></dt>
<dd><p>Energy of the X-ray beam in keV</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym.motor_bounds">
<span class="sig-name descname"><span class="pre">motor_bounds</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym.motor_bounds" title="Link to this definition">#</a></dt>
<dd><p>Dictionary containing the motor bounds of the goniometer/hexapod
e.g. {“mu”: (0, 20), “omega”: (-22, 22), “chi”: (-5, 5), “phi”: (-5, 5)}</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym.epsilon">
<span class="sig-name descname"><span class="pre">epsilon</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym.epsilon" title="Link to this definition">#</a></dt>
<dd><p>Small number used to compute the numerical derivatives during optimization</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym.verbose">
<span class="sig-name descname"><span class="pre">verbose</span></span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym.verbose" title="Link to this definition">#</a></dt>
<dd><p>If True, print the results and iteration of the optimization</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym.get_unit_vectors">
<span class="sig-name descname"><span class="pre">get_unit_vectors</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hkls</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym.get_unit_vectors" title="Link to this definition">#</a></dt>
<dd><p>Get the lattice plane normals and the target vectors,
which are statically defined as the z-axis in BraggSym.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ub</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The UB matrix, shape (3, 3)</p></li>
<li><p><strong>hkls</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The hkl vectors, shape (3, N)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>tuple containing:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><strong>nhat</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>):  The lattice plane</dt><dd><p>normals, shape (3, N)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>target</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The target vectors, i.e.,</dt><dd><p>the z-axis in the lab frame, shape (3, N)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="crispy.dfxm.BraggSym.align">
<span class="sig-name descname"><span class="pre">align</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ub</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hkls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alignment_tol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ftol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_unreachable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/dfxm.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.dfxm.BraggSym.align" title="Link to this definition">#</a></dt>
<dd><p>Align Q = ub &#64; hkls vectors with the lab frame z-axis.</p>
<p>Runs an optimization to find the goniometer angles that align the lattice plane
normals to the target. The target vectors are defined statically as the z-axis
for the BraggSym class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ub</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The UB matrix, shape (3, 3)</p></li>
<li><p><strong>hkls</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>) – The hkl vectors, shape (3, N)</p></li>
<li><p><strong>alignment_tol</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – The tolerance for determining if the optimization
managed to align the reflection for diffraction in unit of degrees,
representing the misalignment of the lattice normal from the target vector.
Default is 1e-4.</p></li>
<li><p><strong>maxiter</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of iterations for the optimization performed
by L-BFGS-B. Default is None, which will be set to 200 * N, where N is the
number of reflections.</p></li>
<li><p><strong>maxls</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>) – The maximum number of line search iterations for the optimization per
iteration of L-BFGS-B. Default is 25.</p></li>
<li><p><strong>ftol</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">float</span></code>) – The tolerance for the optimization cost function before termination.
Default is None, which will be set to 1e-8 / N, where N is the number of
reflections.</p></li>
<li><p><strong>mask_unreachable</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">bool</span></code>) – If True, mask reflections that are unreachable
by the goniometer/hexapod. A reflection is unreachable if the misalignment
of the lattice normal from the target vector is greater than the maximum sum
of the absolute values of the motor bounds. Default is False. Masking
unreachable reflections speed up the optimization by simply not
considering them. When masking is enabled, the solution and residuals
success arrays will hold np.nan values for the unreachable reflections.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p>tuple containing:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt><strong>sol</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The solution angles in degrees,</dt><dd><p>shape (4, N) solution angles are in the order
[mu, omega, chi, phi] such that solution[:, i] are the
goniometer angles for the ith reflection.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>residuals</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The residuals in degrees,</dt><dd><p>shape (N,) these are the misalignments of the lattice
normal from the target vector given that the solution
angles are applied.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>success</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">numpy</span> <span class="pre">array</span></code>): The success of the optimization,</dt><dd><p>shape (N,) True if the optimization converged within a
tolerance of alignment_tol</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>(<code class="xref py py-obj docutils literal notranslate"><span class="pre">tuple</span></code>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-crispy.vizualise">
<span id="vizualise"></span><h1>vizualise<a class="headerlink" href="#module-crispy.vizualise" title="Link to this heading">#</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="crispy.vizualise.centroids">
<span class="sig-prename descclassname"><span class="pre">crispy.vizualise.</span></span><span class="sig-name descname"><span class="pre">centroids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polycrystal</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/vizualise.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.vizualise.centroids" title="Link to this definition">#</a></dt>
<dd><p>Plot the centroids of the grains in the polycrystal.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="crispy.vizualise.mesh">
<span class="sig-prename descclassname"><span class="pre">crispy.vizualise.</span></span><span class="sig-name descname"><span class="pre">mesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">polycrystal</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">neighbourhood</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">select</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/vizualise.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.vizualise.mesh" title="Link to this definition">#</a></dt>
<dd><p>Plot the Voronoi tesselation of the polycrystal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>polycrystal</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">crispy.TDXRDMap</span></code>) – The polycrystal object.</p></li>
<li><p><strong>neighbourhood</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>, optional) – When not None, the grain
with number -neighbourhood- and all of its neighbours are
plotted. Default is None, in which case the entire polycrystal
mesh is plotted.</p></li>
<li><p><strong>select</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">int</span></code>, optional) – List of grain indices
to plot. Default is None.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-crispy.assets">
<span id="assets"></span><h1>assets<a class="headerlink" href="#module-crispy.assets" title="Link to this heading">#</a></h1>
<p>Module to load example data and phantoms.</p>
<dl class="py function">
<dt class="sig sig-object py" id="crispy.assets.grainmap_id11">
<span class="sig-prename descclassname"><span class="pre">crispy.assets.</span></span><span class="sig-name descname"><span class="pre">grainmap_id11</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/AxelHenningsson/crispy/tree/main/crispy/assets.py/"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#crispy.assets.grainmap_id11" title="Link to this definition">#</a></dt>
<dd><p>Load a grain map from the ID11 beamline at ESRF on a FeAu sample.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>List of grains in the grain map.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">list</span></code> of <code class="xref py py-obj docutils literal notranslate"><span class="pre">ImageD11.grain.grain</span></code></p>
</dd>
</dl>
</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">GrainMap</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._grain_map.GrainMap"><code class="docutils literal notranslate"><span class="pre">GrainMap</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#polycrystal">Polycrystal</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal"><code class="docutils literal notranslate"><span class="pre">Polycrystal</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.reference_cell"><code class="docutils literal notranslate"><span class="pre">Polycrystal.reference_cell</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.grains"><code class="docutils literal notranslate"><span class="pre">Polycrystal.grains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.number_of_grains"><code class="docutils literal notranslate"><span class="pre">Polycrystal.number_of_grains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal._misorientations"><code class="docutils literal notranslate"><span class="pre">Polycrystal._misorientations</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.neighbours"><code class="docutils literal notranslate"><span class="pre">Polycrystal.neighbours</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.texturize"><code class="docutils literal notranslate"><span class="pre">Polycrystal.texturize()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.misorientations"><code class="docutils literal notranslate"><span class="pre">Polycrystal.misorientations</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.ubi"><code class="docutils literal notranslate"><span class="pre">Polycrystal.ubi</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.u"><code class="docutils literal notranslate"><span class="pre">Polycrystal.u</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.orientation"><code class="docutils literal notranslate"><span class="pre">Polycrystal.orientation</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.b"><code class="docutils literal notranslate"><span class="pre">Polycrystal.b</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.strain"><code class="docutils literal notranslate"><span class="pre">Polycrystal.strain</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.crystal_system"><code class="docutils literal notranslate"><span class="pre">Polycrystal.crystal_system</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._polycrystal.Polycrystal.colorize"><code class="docutils literal notranslate"><span class="pre">Polycrystal.colorize()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tdxrdmap">TDXRDMap</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap"><code class="docutils literal notranslate"><span class="pre">TDXRDMap</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.grains"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.grains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.number_of_grains"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.number_of_grains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.bounding_box"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.bounding_box</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.extent"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.extent</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.centroids"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.centroids</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.u"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.u</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.orientations"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.orientations</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.b"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.b</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.neighbours"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.neighbours</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.misorientations"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.misorientations</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.add_grain_attr"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.add_grain_attr()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id0"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.neighbours</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.bounding_box</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id2"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.extent</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.centroids</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.sum_peak_intensity"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.sum_peak_intensity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.number_of_peaks"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.number_of_peaks</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.median_peak_intensity"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.median_peak_intensity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.mean_peak_intensity"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.mean_peak_intensity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.min_peak_intensity"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.min_peak_intensity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.max_peak_intensity"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.max_peak_intensity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.std_peak_intensity"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.std_peak_intensity</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.from_array"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.from_array()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.tesselate"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.tesselate()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.texturize"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.texturize()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._tdxrd_map.TDXRDMap.write"><code class="docutils literal notranslate"><span class="pre">TDXRDMap.write()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#labdctvolume">LabDCTVolume</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.reference_cell"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.reference_cell</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.voxel_size"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.voxel_size</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.labels"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.labels</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.X"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.X</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.Y"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.Y</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.Z"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.Z</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.orientations"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.orientations</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.B0"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.B0</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.grains"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.grains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.number_of_grains"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.number_of_grains</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.write"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.write()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.texturize"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.texturize()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.center_of_mass"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.center_of_mass</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.center_volume"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.center_volume()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.filter"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.filter()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.crop"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.crop()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.translate"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.translate()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy._lab_dct_volume.LabDCTVolume.rotate"><code class="docutils literal notranslate"><span class="pre">LabDCTVolume.rotate()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#module-crispy.dfxm">dfxm</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer"><code class="docutils literal notranslate"><span class="pre">Goniometer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.polycrystal"><code class="docutils literal notranslate"><span class="pre">Goniometer.polycrystal</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.energy"><code class="docutils literal notranslate"><span class="pre">Goniometer.energy</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.detector_distance"><code class="docutils literal notranslate"><span class="pre">Goniometer.detector_distance</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.motor_bounds"><code class="docutils literal notranslate"><span class="pre">Goniometer.motor_bounds</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.find_reflections"><code class="docutils literal notranslate"><span class="pre">Goniometer.find_reflections()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.table_of_reflections"><code class="docutils literal notranslate"><span class="pre">Goniometer.table_of_reflections()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Goniometer.find_symmetry_axis"><code class="docutils literal notranslate"><span class="pre">Goniometer.find_symmetry_axis()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez"><code class="docutils literal notranslate"><span class="pre">Braggez</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.energy"><code class="docutils literal notranslate"><span class="pre">Braggez.energy</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.motor_bounds"><code class="docutils literal notranslate"><span class="pre">Braggez.motor_bounds</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.epsilon"><code class="docutils literal notranslate"><span class="pre">Braggez.epsilon</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.verbose"><code class="docutils literal notranslate"><span class="pre">Braggez.verbose</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.R_mu"><code class="docutils literal notranslate"><span class="pre">Braggez.R_mu()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.R_omega"><code class="docutils literal notranslate"><span class="pre">Braggez.R_omega()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.R_chi"><code class="docutils literal notranslate"><span class="pre">Braggez.R_chi()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.R_phi"><code class="docutils literal notranslate"><span class="pre">Braggez.R_phi()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.R"><code class="docutils literal notranslate"><span class="pre">Braggez.R()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.cost_vector"><code class="docutils literal notranslate"><span class="pre">Braggez.cost_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.cost"><code class="docutils literal notranslate"><span class="pre">Braggez.cost()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.cost_and_grad"><code class="docutils literal notranslate"><span class="pre">Braggez.cost_and_grad()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.get_unit_vectors"><code class="docutils literal notranslate"><span class="pre">Braggez.get_unit_vectors()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.Braggez.align"><code class="docutils literal notranslate"><span class="pre">Braggez.align()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym"><code class="docutils literal notranslate"><span class="pre">BraggSym</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym.energy"><code class="docutils literal notranslate"><span class="pre">BraggSym.energy</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym.motor_bounds"><code class="docutils literal notranslate"><span class="pre">BraggSym.motor_bounds</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym.epsilon"><code class="docutils literal notranslate"><span class="pre">BraggSym.epsilon</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym.verbose"><code class="docutils literal notranslate"><span class="pre">BraggSym.verbose</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym.get_unit_vectors"><code class="docutils literal notranslate"><span class="pre">BraggSym.get_unit_vectors()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.dfxm.BraggSym.align"><code class="docutils literal notranslate"><span class="pre">BraggSym.align()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#module-crispy.vizualise">vizualise</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.vizualise.centroids"><code class="docutils literal notranslate"><span class="pre">centroids()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.vizualise.mesh"><code class="docutils literal notranslate"><span class="pre">mesh()</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#module-crispy.assets">assets</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crispy.assets.grainmap_id11"><code class="docutils literal notranslate"><span class="pre">grainmap_id11()</span></code></a></li>
</ul>
</li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="_sources/index.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Axel Henningsson.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>